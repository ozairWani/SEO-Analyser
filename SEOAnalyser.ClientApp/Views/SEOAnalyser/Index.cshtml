
@{
    ViewBag.Title = "Index";
}

<head>
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <link href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/resources/demos/style.css">
    @*<script src="https://code.jquery.com/jquery-1.12.4.js"></script>*@
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
      $( function() {
        $( "#tabs" ).tabs();
      } );
    </script>
</head>

<h3>Enter below Text or URL for Analysis:</h3>
<div>
    @Html.TextArea("txtSreach", null, new { @class = "form-control searchText",  @rows = 5 })

    @Html.CheckBox("SpotWords", true)Remove SpotWords &nbsp;

    @Html.CheckBox("Words", true)Occurrences Of Word in Text/URL &nbsp;

    @Html.CheckBox("MetaTags", true)Occurrences Of Meta Tags in URL &nbsp;

    @Html.CheckBox("externalLinks", true)Occurrences Of external links in Text/URL &nbsp;
    <br />
    <button class="btn btn-primary" type="submit" id="btnShow">Analyse</button>
    <input type="button" onclick="reset();" class="btn btn-primary" value="Reset!"></input>
</div>
<div id="errorDisplay">
    <div class="alert alert-danger" id="error">
          
    </div>
</div>

<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Word Count</a></li>
        <li><a href="#tabs-2">Meta Tags</a></li>
        <li><a href="#tabs-3">External Links</a></li>
    </ul>
    <div id="tabs-1">
        <h2>Word Count Details</h2>
        <table id="WordsCount" class="table table-striped table-bordered" cellspacing="0" width="100%">
            <thead>
                <tr>
                    <th>@Html.DisplayName("Words")</th>
                    <th>@Html.DisplayName("Occurence")</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <div id="tabs-2">
        <h2>Meta Tag Keyword details</h2>
        <table id="MetaTag" class="table table-striped table-bordered" cellspacing="0" width="100%">
            <thead>
                <tr>
                    <th>@Html.DisplayName("Meta Tag Keywords")</th>
                    <th>@Html.DisplayName("Occurence")</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <div id="tabs-3">
        <h2>External Link Details</h2>
        <table id="ExternalLinks" class="table table-striped table-bordered" cellspacing="0" width="100%">
            <thead>
                <tr>
                    <th>@Html.DisplayName("External Links")</th>
                    <th>@Html.DisplayName("Occurence")</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>


<div id="my-tab-content" class="tab-content">
    <div class="tab-pane  active" id="tab1">
        <br />
        <br />
        
    </div> 
</div>

<script>

    $(function () {
        $('#errorDisplay').hide();
    });

    reset = function () {
       
        $('#SpotWords').prop("checked", true);
        $('#Words').prop("checked", true);
        $('#MetaTags').prop("checked", true);
        $('#externalLinks').prop("checked", true);
        $('#txtSreach').val('');
    };
   
    $("#btnShow").click(function (e) {

        $('#errorDisplay').hide();

        var searchtext = $("#txtSreach").val();
        if ($.trim(searchtext) == "") {
            alert('Please enter Text or URL for Analysis!');
            return;
        }

        var model = {
            IsStopWord: $('#SpotWords').is(':checked'),
            IsWordCount: $('#Words').is(':checked'),
            IsMetaTags: $('#MetaTags').is(':checked'),
            IsExternalLinks: $('#externalLinks').is(':checked'),
            SearchText: $("#txtSreach").val()
        }
         

        $.ajax({
            url: 'SEOAnalyser/AnalyseData',
            type: 'Get',
            data: model,
            success: function (data) {
                //$.noConflict();
                if (data.ResponseCode) {
                    var content = data.Content;
                    var jsonData = $.parseJSON(data.Content);
                    var WordsCount = jsonData.WordsCount;
                    var MetatagsCount = jsonData.MetatagsCount;
                    var LinksCount = jsonData.LinksCount;

                    $('#WordsCount tbody').empty();
                    $('#MetaTag tbody').empty();
                    $('#ExternalLinks tbody').empty();

                    $.each(WordsCount, function (i, item) {
                        var rows = "<tr>" + "<td>" + i + "</td>" + "<td>" + item + "</td>" + "</tr>";
                        $('#WordsCount tbody').append(rows);
                    });
                    $.each(LinksCount, function (i, item) {
                        var rows = "<tr>" + "<td>" + i + "</td>" + "<td>" + item + "</td>" + "</tr>";
                        $('#ExternalLinks tbody').append(rows);
                    });

                    $.each(MetatagsCount, function (i, item) {
                        var rows = "<tr>" + "<td>" + i + "</td>" + "<td>" + item + "</td>" + "</tr>";
                        $('#MetaTag tbody').append(rows);
                    });

                    $('#WordsCount').DataTable();
                    $('#ExternalLinks').DataTable();
                    $('#MetaTag').DataTable();
                }
                else {
                    console.log(data.Content);
                    $('#errorDisplay').show();
                    $('#error').text(data.Content);
                }
            } 
        });
    });

</script>


